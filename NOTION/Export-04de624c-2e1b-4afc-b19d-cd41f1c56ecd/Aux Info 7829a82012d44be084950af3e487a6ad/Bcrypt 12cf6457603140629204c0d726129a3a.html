<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Bcrypt</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="12cf6457-6031-4062-9204-c0d726129a3a" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">✨</span></div><h1 class="page-title">Bcrypt</h1><table class="properties"><tbody><tr class="property-row property-row-date"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesDate"><path d="M10.8889,5.5 L3.11111,5.5 L3.11111,7.05556 L10.8889,7.05556 L10.8889,5.5 Z M12.4444,1.05556 L11.6667,1.05556 L11.6667,0 L10.1111,0 L10.1111,1.05556 L3.88889,1.05556 L3.88889,0 L2.33333,0 L2.33333,1.05556 L1.55556,1.05556 C0.692222,1.05556 0.00777777,1.75556 0.00777777,2.61111 L0,12.5 C0,13.3556 0.692222,14 1.55556,14 L12.4444,14 C13.3,14 14,13.3556 14,12.5 L14,2.61111 C14,1.75556 13.3,1.05556 12.4444,1.05556 Z M12.4444,12.5 L1.55556,12.5 L1.55556,3.94444 L12.4444,3.94444 L12.4444,12.5 Z M8.55556,8.61111 L3.11111,8.61111 L3.11111,10.1667 L8.55556,10.1667 L8.55556,8.61111 Z"></path></svg></span>Created</th><td><time>@July 20, 2021 12:00 AM</time></td></tr><tr class="property-row property-row-person"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesPerson"><path d="M9.625,10.8465 C8.91187,10.2891 8.12088,9.926 7,9.26013 L7,8.71938 C7.21175,8.47612 7.392,8.176 7.53813,7.83213 C7.94587,7.7315 8.3125,7.33425 8.3125,7 C8.3125,6.51788 8.1095,6.32713 7.8715,6.17137 C7.8715,6.15562 7.875,6.14162 7.875,6.125 C7.875,5.41362 7.4375,3.5 5.25,3.5 C3.0625,3.5 2.625,5.4145 2.625,6.125 C2.625,6.14162 2.6285,6.15562 2.6285,6.17137 C2.3905,6.32713 2.1875,6.51788 2.1875,7 C2.1875,7.33425 2.55413,7.7315 2.96187,7.833 C3.108,8.176 3.28825,8.47612 3.5,8.71938 L3.5,9.26013 C2.37912,9.92513 1.58812,10.2882 0.875,10.8465 C0.041125,11.4984 0,12.4688 0,14 L10.5,14 C10.5,12.4688 10.4589,11.4984 9.625,10.8465 Z M13.125,7.3465 C12.4119,6.78912 11.6209,6.426 10.5,5.76013 L10.5,5.21938 C10.7118,4.97613 10.892,4.676 11.0381,4.33213 C11.4459,4.2315 11.8125,3.83425 11.8125,3.5 C11.8125,3.01787 11.6095,2.82713 11.3715,2.67138 C11.3715,2.65562 11.375,2.64162 11.375,2.625 C11.375,1.91363 10.9375,0 8.75,0 C6.5625,0 6.125,1.9145 6.125,2.625 C6.125,2.64162 6.1285,2.65562 6.1285,2.67138 C6.11188,2.68275 6.09787,2.69588 6.08125,2.70725 C7.83212,3.066 8.59688,4.54825 8.72813,5.74787 C8.97575,6.00863 9.1875,6.39625 9.1875,7 C9.1875,7.60288 8.771,8.20312 8.18388,8.51462 C8.127,8.624 8.06662,8.729 8.00275,8.82962 C8.155,8.91537 8.30025,8.99675 8.44025,9.07463 C9.08075,9.4325 9.63375,9.74137 10.164,10.1561 C10.3022,10.2638 10.4204,10.3801 10.5289,10.4991 L14,10.4991 C14,8.96875 13.9589,7.99837 13.125,7.3465 Z"></path></svg></span>Created by</th><td><span class="user"><img src="https://lh3.googleusercontent.com/a-/AOh14GhFhclieX_7cTnK6L371bcbb7cAlFuuh13S9ED7KA=s100" class="icon user-icon"/>Bryan Guner</span></td></tr><tr class="property-row property-row-select"><th><span class="icon property-icon"><svg viewBox="0 0 14 14" style="width:14px;height:14px;display:block;fill:rgba(55, 53, 47, 0.4);flex-shrink:0;-webkit-backface-visibility:hidden" class="typesSelect"><path d="M7,13 C10.31348,13 13,10.31371 13,7 C13,3.68629 10.31348,1 7,1 C3.68652,1 1,3.68629 1,7 C1,10.31371 3.68652,13 7,13 Z M3.75098,5.32278 C3.64893,5.19142 3.74268,5 3.90869,5 L10.09131,5 C10.25732,5 10.35107,5.19142 10.24902,5.32278 L7.15771,9.29703 C7.07764,9.39998 6.92236,9.39998 6.84229,9.29703 L3.75098,5.32278 Z"></path></svg></span>Tags</th><td><span class="selected-value select-value-color-green">packages</span></td></tr></tbody></table></header><div class="page-body"><h2 id="bee3d580-8a36-4d54-a8a6-1f5127cd5b4e" class=""><strong>Install via NPM</strong></h2><p id="e5997029-4391-4532-b949-b6f68a3f9dfa" class=""><code>npm install bcrypt</code></p><p id="14c08f28-a687-4b3f-9db6-1b55f0f6a9d9" class=""><em><strong>Note:</strong></em> OS X users using Xcode 4.3.1 or above may need to run the following command in their terminal prior to installing if errors occur regarding xcodebuild: <code>sudo xcode-select -switch /Applications/Xcode.app/Contents/Developer</code></p><p id="7a28ab3c-1052-4411-91a5-869a2d913959" class=""><em>Pre-built binaries for various NodeJS versions are made available on a best-effort basis.</em></p><p id="d316aee7-e5e6-4cc6-9fd0-e02ea2185f00" class="">Only the current stable and supported LTS releases are actively tested against. Please note that there may be an interval between the release of the module and the availabilty of the compiled modules.</p><p id="c6484486-89cf-4b23-a0b6-4b5d7df178e4" class="">Currently, we have pre-built binaries that support the following platforms:</p><ol type="1" id="57ca20f3-7bf5-4110-bc6f-d64e08cff014" class="numbered-list" start="1"><li>Windows x32 and x64</li></ol><ol type="1" id="e89dfcae-d868-4e80-9d1e-fb5dd986b856" class="numbered-list" start="2"><li>Linux x64 (GlibC targets only). Pre-built binaries for MUSL targets such as Apline Linux are not available.</li></ol><ol type="1" id="c0a90414-c05e-4a5d-9def-600f695a0571" class="numbered-list" start="3"><li>macOS</li></ol><p id="fddfe738-9512-4101-a148-11b78f3ac269" class="">If you face an error like this:</p><p id="5f0dafc2-5b57-438a-b3d4-2412f62c0e12" class=""><code>node-pre-gyp ERR! Tried to download(404): https://github.com/kelektiv/node.bcrypt.js/releases/download/v1.0.2/bcrypt_lib-v1.0.2-node-v48-linux-x64.tar.gz</code></p><p id="7d2362a7-3c49-4095-a3f3-f9f2137b1f8a" class="">make sure you have the appropriate dependencies installed and configured for your platform. You can find installation instructions for the dependencies for some common platforms <a href="https://github.com/kelektiv/node.bcrypt.js/wiki/Installation-Instructions">in this page</a>.</p><h2 id="7ba6c660-e46e-4a60-a415-fb2253a5f33e" class=""><strong>Usage</strong></h2><h3 id="5295f646-6ce8-4eba-a0d9-505138393c3d" class=""><strong>async (recommended)</strong></h3><p id="cda0aa97-597c-4fc3-b4e0-1365d3cb8a8f" class=""><code>const bcrypt = require(&#x27;bcrypt&#x27;);
const saltRounds = 10;
const myPlaintextPassword = &#x27;s0/\/\P4$$w0rD&#x27;;
const someOtherPlaintextPassword = &#x27;not_bacon&#x27;;</code></p><h3 id="f3dd83bf-fc65-43a3-a7d2-d10d6c103e9a" class=""><strong>To hash a password:</strong></h3><p id="61ca03cb-9171-47df-9d97-064e7ed8bf27" class="">Technique 1 (generate a salt and hash on separate function calls):</p><p id="09f0b17b-7b1e-41b6-9623-dded01aa2ea4" class=""><code>bcrypt.genSalt(saltRounds, function(err, salt) {
    bcrypt.hash(myPlaintextPassword, salt, function(err, hash) {
        // Store hash in your password DB.
    });
});</code></p><p id="17608c80-9688-4d01-a62b-08636839f92a" class="">Technique 2 (auto-gen a salt and hash):</p><p id="360f792a-4d81-4cf6-b00e-3203db220b1f" class=""><code>bcrypt.hash(myPlaintextPassword, saltRounds, function(err, hash) {
    // Store hash in your password DB.
});</code></p><p id="0d441b42-ce97-459f-b4d1-00bacb2cc940" class="">Note that both techniques achieve the same end-result.</p><h3 id="bc20cf33-9d06-4e59-9465-c65cf1af93b5" class=""><strong>To check a password:</strong></h3><p id="eae121d5-7d1e-4504-9652-4291cb738bd2" class=""><code>// Load hash from your password DB.
bcrypt.compare(myPlaintextPassword, hash, function(err, result) {
    // result == true
});
bcrypt.compare(someOtherPlaintextPassword, hash, function(err, result) {
    // result == false
});</code></p><p id="24eb6a7e-6df8-4e64-a59b-c41ddf7f8261" class=""><a href="https://github.com/kelektiv/node.bcrypt.js#a-note-on-timing-attacks">A Note on Timing Attacks</a></p><h3 id="ae6e1960-2781-4c34-bd88-35eb91a1dd53" class=""><strong>with promises</strong></h3><p id="4dd44043-403d-4147-bc44-ac3862f35f87" class="">bcrypt uses whatever Promise implementation is available in <code>global.Promise</code>. NodeJS &gt;= 0.12 has a native Promise implementation built in. However, this should work in any Promises/A+ compliant implementation.</p><p id="d3137741-cb6a-4124-9220-146ad7e84e2f" class="">Async methods that accept a callback, return a <code>Promise</code> when callback is not specified if Promise support is available.</p><p id="c25aa0db-36af-4fdd-9a85-dac8146a13ad" class=""><code>bcrypt.hash(myPlaintextPassword, saltRounds).then(function(hash) {
    // Store hash in your password DB.
});</code></p><p id="1c416e6c-089e-49cd-a9b1-24ca37d49ba7" class=""><code>// Load hash from your password DB.
bcrypt.compare(myPlaintextPassword, hash).then(function(result) {
    // result == true
});
bcrypt.compare(someOtherPlaintextPassword, hash).then(function(result) {
    // result == false
});</code></p><p id="b21e1dd2-2142-407e-aeac-c0e8e2e76241" class="">This is also compatible with <code>async/await</code></p><p id="13b8e361-9053-46ae-92ec-f867ad8888f4" class=""><code>async function checkUser(username, password) {
    //... fetch user from a db etc.

    const match = await bcrypt.compare(password, user.passwordHash);

    if(match) {
        //login
    }

    //...
}</code></p><h3 id="c1d69492-f819-44af-9eea-1357dafa6ef4" class=""><strong>sync</strong></h3><p id="41e3fdb4-ee69-462b-91f7-829e2beaa78d" class=""><code>const bcrypt = require(&#x27;bcrypt&#x27;);
const saltRounds = 10;
const myPlaintextPassword = &#x27;s0/\/\P4$$w0rD&#x27;;
const someOtherPlaintextPassword = &#x27;not_bacon&#x27;;</code></p><h3 id="9adb344d-0b6f-4d2a-a1bd-3befd6275a6f" class=""><strong>To hash a password:</strong></h3><p id="4151615c-bb8e-479f-8818-32cd83184648" class="">Technique 1 (generate a salt and hash on separate function calls):</p><p id="c35f05e0-26a6-4c35-b30e-cf991082cfee" class=""><code>const salt = bcrypt.genSaltSync(saltRounds);
const hash = bcrypt.hashSync(myPlaintextPassword, salt);
// Store hash in your password DB.</code></p><p id="7840fb09-a43d-4991-a9a1-0e713e30cd67" class="">Technique 2 (auto-gen a salt and hash):</p><p id="d84333d6-514d-49e7-9c75-d35003cc89b0" class=""><code>const hash = bcrypt.hashSync(myPlaintextPassword, saltRounds);
// Store hash in your password DB.</code></p><p id="58f2019f-1acb-4cca-ba9e-610aa7afcb08" class="">As with async, both techniques achieve the same end-result.</p><h3 id="87c6939a-9e1d-4d24-84c5-d3c8f4a498aa" class=""><strong>To check a password:</strong></h3><p id="e2d197ae-8bd4-4623-87d8-6150b3243c19" class=""><code>// Load hash from your password DB.
bcrypt.compareSync(myPlaintextPassword, hash); // true
bcrypt.compareSync(someOtherPlaintextPassword, hash); // false</code></p><p id="297935b7-0aef-4b2c-8d1a-a99c20fcdfbc" class=""><a href="https://github.com/kelektiv/node.bcrypt.js#a-note-on-timing-attacks">A Note on Timing Attacks</a></p><h3 id="9cfd7db4-4ac7-4807-a6c4-f6fee16486bc" class=""><strong>Why is async mode recommended over sync mode?</strong></h3><p id="2898d8a3-865d-4613-b975-0ac9cb05c176" class="">If you are using bcrypt on a simple script, using the sync mode is perfectly fine. However, if you are using bcrypt on a server, the async mode is recommended. This is because the hashing done by bcrypt is CPU intensive, so the sync version will block the event loop and prevent your application from servicing any other inbound requests or events. The async version uses a thread pool which does not block the main event loop.</p><h2 id="1551b913-4cae-4e4e-8e18-b2881ff6c302" class=""><strong>API</strong></h2><p id="bd068dc8-b85c-415b-b532-f59cc89f766c" class=""><code>BCrypt.</code></p><ul id="a622e26c-1d95-44c5-8482-176c1981a012" class="bulleted-list"><li><code>genSaltSync(rounds, minor)</code><ul id="245c5592-c1a8-4537-8fc8-e51497b27594" class="bulleted-list"><li><code>rounds</code> - [OPTIONAL] - the cost of processing the data. (default - 10)</li></ul><ul id="d25f0f08-5732-400d-86a3-0ac1287a32c8" class="bulleted-list"><li><code>minor</code> - [OPTIONAL] - minor version of bcrypt to use. (default - b)</li></ul></li></ul><ul id="f55b3fbe-0872-48fa-9818-9800169643db" class="bulleted-list"><li><code>genSalt(rounds, minor, cb)</code><ul id="9327f88e-cc43-43a2-b83b-9e102c65e17f" class="bulleted-list"><li><code>rounds</code> - [OPTIONAL] - the cost of processing the data. (default - 10)</li></ul><ul id="b310ec91-a283-46be-9761-e2bacf38639c" class="bulleted-list"><li><code>minor</code> - [OPTIONAL] - minor version of bcrypt to use. (default - b)</li></ul><ul id="6dcb3f7a-1303-4f43-845b-5104df84b4e8" class="bulleted-list"><li><code>cb</code> - [OPTIONAL] - a callback to be fired once the salt has been generated. uses eio making it asynchronous. If <code>cb</code> is not specified, a <code>Promise</code> is returned if Promise support is available.<ul id="90eb5128-ff3b-48dd-988a-2ad632589855" class="bulleted-list"><li><code>err</code> - First parameter to the callback detailing any errors.</li></ul><ul id="def5433c-c92b-4945-86b3-ad4f048082b7" class="bulleted-list"><li><code>salt</code> - Second parameter to the callback providing the generated salt.</li></ul></li></ul></li></ul><ul id="048b0658-6d80-43c2-8cc5-94639f9449c4" class="bulleted-list"><li><code>hashSync(data, salt)</code><ul id="b36bb71d-7799-41d3-841f-b80b816a5067" class="bulleted-list"><li><code>data</code> - [REQUIRED] - the data to be encrypted.</li></ul><ul id="485882a6-d20e-47be-ab7b-798fd3ac1aba" class="bulleted-list"><li><code>salt</code> - [REQUIRED] - the salt to be used to hash the password. if specified as a number then a salt will be generated with the specified number of rounds and used (see example under <strong>Usage</strong>).</li></ul></li></ul><ul id="161849d1-0507-4361-a7c5-22871ba17170" class="bulleted-list"><li><code>hash(data, salt, cb)</code><ul id="36324356-9dc1-420e-aa63-fd175d1239ee" class="bulleted-list"><li><code>data</code> - [REQUIRED] - the data to be encrypted.</li></ul><ul id="f183dc59-04db-4223-b41c-49c60c0a7e47" class="bulleted-list"><li><code>salt</code> - [REQUIRED] - the salt to be used to hash the password. if specified as a number then a salt will be generated with the specified number of rounds and used (see example under <strong>Usage</strong>).</li></ul><ul id="0f9eb4e8-48e5-413a-a73a-36e09d22d276" class="bulleted-list"><li><code>cb</code> - [OPTIONAL] - a callback to be fired once the data has been encrypted. uses eio making it asynchronous. If <code>cb</code> is not specified, a <code>Promise</code> is returned if Promise support is available.<ul id="a8b16671-629b-4593-a480-6079944ac2e4" class="bulleted-list"><li><code>err</code> - First parameter to the callback detailing any errors.</li></ul><ul id="f36add49-2188-421e-8394-60327d8b345c" class="bulleted-list"><li><code>encrypted</code> - Second parameter to the callback providing the encrypted form.</li></ul></li></ul></li></ul><ul id="bb9f9ee7-0456-4d33-863b-72250f5b0612" class="bulleted-list"><li><code>compareSync(data, encrypted)</code><ul id="2332108b-044f-49be-8440-d31a601abd87" class="bulleted-list"><li><code>data</code> - [REQUIRED] - data to compare.</li></ul><ul id="3983ee49-cb80-43c9-8868-0feb2167319e" class="bulleted-list"><li><code>encrypted</code> - [REQUIRED] - data to be compared to.</li></ul></li></ul><ul id="93ee40f7-daa5-4018-81f5-4f5cbfccf91a" class="bulleted-list"><li><code>compare(data, encrypted, cb)</code><ul id="46c382c3-f51b-414b-9c87-007c624be7b9" class="bulleted-list"><li><code>data</code> - [REQUIRED] - data to compare.</li></ul><ul id="87e0717f-bf64-4958-a307-393cd4a83459" class="bulleted-list"><li><code>encrypted</code> - [REQUIRED] - data to be compared to.</li></ul><ul id="aca55c8e-1ac8-4d05-99b9-66d5b742a622" class="bulleted-list"><li><code>cb</code> - [OPTIONAL] - a callback to be fired once the data has been compared. uses eio making it asynchronous. If <code>cb</code> is not specified, a <code>Promise</code> is returned if Promise support is available.<ul id="17d43e5b-b17b-4ec8-b29a-baf8275cedcb" class="bulleted-list"><li><code>err</code> - First parameter to the callback detailing any errors.</li></ul><ul id="42e0f953-01dc-4489-bd19-3a152bcb243e" class="bulleted-list"><li><code>same</code> - Second parameter to the callback providing whether the data and encrypted forms match [true | false].</li></ul></li></ul></li></ul><ul id="c3f004f3-05bd-4f47-a331-face01d41fa5" class="bulleted-list"><li><code>getRounds(encrypted)</code> - return the number of rounds used to encrypt a given hash<ul id="e6eb7018-dbf8-4474-8388-b4aea8df524f" class="bulleted-list"><li><code>encrypted</code> - [REQUIRED] - hash from which the number of rounds used should be extracted.</li></ul></li></ul><h2 id="a964c765-efa7-4e9a-9d57-33c8be56ca74" class=""><strong>A Note on Rounds</strong></h2><p id="c1bbf251-c5f0-42f1-b1d6-9fe90cd11e2d" class="">A note about the cost. When you are hashing your data the module will go through a series of rounds to give you a secure hash. The value you submit there is not just the number of rounds that the module will go through to hash your data. The module will use the value you enter and go through <code>2^rounds</code> iterations of processing.</p><p id="867081ff-d56e-44f9-a68a-e6f8bd671746" class="">From @garthk, on a 2GHz core you can roughly expect:</p><p id="3ba0dd50-26ce-4198-806d-f9e9307b99d2" class=""><code>rounds=8 : ~40 hashes/sec
rounds=9 : ~20 hashes/sec
rounds=10: ~10 hashes/sec
rounds=11: ~5  hashes/sec
rounds=12: 2-3 hashes/sec
rounds=13: ~1 sec/hash
rounds=14: ~1.5 sec/hash
rounds=15: ~3 sec/hash
rounds=25: ~1 hour/hash
rounds=31: 2-3 days/hash</code></p><h2 id="09f0c799-213f-4a94-8d1d-e56922334156" class=""><strong>A Note on Timing Attacks</strong></h2><p id="fe0e33c9-4a58-4c63-ae3d-7b8b9e181487" class="">Because it&#x27;s come up multiple times in this project, and other bcrypt projects, it needs to be said. The bcrypt comparison function is not susceptible to timing attacks. From codahale/bcrypt-ruby#42:</p><blockquote id="e14992d5-1196-442d-b67a-8b0e388ed03e" class="">One of the desired properties of a cryptographic hash function is preimage attack resistance, which means there is no shortcut for generating a message which, when hashed, produces a specific digest.</blockquote><p id="1c779946-8a1b-4cc6-9772-68c339ff4425" class="">A great thread on this, in much more detail can be found @ codahale/bcrypt-ruby#43</p><p id="0d2f357f-62e0-488d-bd4f-76a01c930b5e" class="">If you&#x27;re unfamiliar with timing attacks and want to learn more you can find a great writeup @ <a href="https://codahale.com/a-lesson-in-timing-attacks/">A Lesson In Timing Attacks</a></p><p id="77e8df32-1a33-4007-ac7d-20a6a6fcdb94" class="">However, timing attacks are real. And, the comparison function is <em>not</em> time safe. What that means is that it may exit the function early in the comparison process. This happens because of the above. We don&#x27;t need to be careful that an attacker is going to learn anything, and our comparison function serves to provide a comparison of hashes, it is a utility to the overall purpose of the library. If you end up using it for something else we cannot guarantee the security of the comparator. Keep that in mind as you use the library.</p><h2 id="be4549a6-e9fb-40f5-8d4b-cc5963fe815d" class=""><strong>Hash Info</strong></h2><p id="ef103c57-51b4-4c8e-ae1d-71e761b4c2b4" class="">The characters that comprise the resultant hash are <code>./ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789$</code>.</p><p id="4ade101e-45c0-4b2e-9493-b4d7ee7e85d0" class="">Resultant hashes will be 60 characters long and they will include the salt among other parameters, as follows:</p><p id="50957d4d-7b66-491c-b4c5-88f0e7c4d51d" class=""><code>$[algorithm]$[cost]$[salt][hash]</code></p><ul id="56d398b0-4aff-44a4-a8da-946baa8eb0ca" class="bulleted-list"><li>2 chars hash algorithm identifier prefix. <code>&quot;$2a$&quot; or &quot;$2b$&quot;</code> indicates BCrypt</li></ul><ul id="2330e643-1bca-4e10-8413-00384098b673" class="bulleted-list"><li>Cost-factor (n). Represents the exponent used to determine how many iterations 2^n</li></ul><ul id="91e488a5-b0b4-4581-acc8-4d32041fa45c" class="bulleted-list"><li>16-byte (128-bit) salt, base64 encoded to 22 characters</li></ul><ul id="dc9d0208-113c-4a91-80fc-b214cce73eba" class="bulleted-list"><li>24-byte (192-bit) hash, base64 encoded to 31 characters</li></ul><p id="0212e0c1-0e1b-47e1-9b65-924553fea0ef" class="">Example:</p><p id="7c48952d-1cbf-4cbc-8feb-e6ca631210c0" class=""><code>$2b$10$nOUIs5kJ7naTuTFkBy1veuK0kSxUFXfuaOKdOKf9xYT0KKIGSJwFa
 |  |  |                     |
 |  |  |                     hash-value = K0kSxUFXfuaOKdOKf9xYT0KKIGSJwFa
 |  |  |
 |  |  salt = nOUIs5kJ7naTuTFkBy1veu
 |  |
 |  cost-factor =&gt; 10 = 2^10 rounds
 |
 hash-algorithm identifier =&gt; 2b = BCrypt</code></p><h2 id="fec88b94-1c4c-4979-8019-0e8503e2d70a" class=""><strong>Testing</strong></h2><p id="6a7b2406-ecff-4de6-b02b-b9575e49a66a" class="">If you create a pull request, tests better pass :)</p><p id="75976a6b-cd03-4002-b872-132aeae47ada" class=""><code>npm install
npm test</code></p><p id="1cc20fe6-38be-40d0-952f-e90fa8e48969" class="">
</p><hr id="9caee9ac-d62a-4aee-ab3a-fb892b6d17d8"/><p id="7e4c77fa-181f-4d0f-a1fd-b59319769040" class="">
</p><p id="eef2f2d5-b8dc-470c-98e5-a0eb82e29e40" class="">
</p><p id="b3ff58cd-db7e-41d2-b08c-3d427fbff714" class=""><strong>Understand BCrypt Hashes</strong></p><p id="3b018132-769d-4f8d-861e-00e4f65ce7d1" class="">For the following challenges, you will be working with a new starter project that is different from the previous one. You can find the new starter project on <a href="https://replit.com/github/freeCodeCamp/boilerplate-bcrypt">Replit</a>, or clone it from <a href="https://github.com/freeCodeCamp/boilerplate-bcrypt/">GitHub</a>.</p><p id="762b6234-0319-4063-a7ce-b8bd1a89b800" class="">BCrypt hashes are very secure. A hash is basically a fingerprint of the original data- always unique. This is accomplished by feeding the original data into an algorithm and returning a fixed length result. To further complicate this process and make it more secure, you can also <em>salt</em> your hash. Salting your hash involves adding random data to the original data before the hashing process which makes it even harder to crack the hash.</p><p id="104ed34d-30cd-4975-a459-4c49fc205c62" class="">BCrypt hashes will always looks like <code>$2a$13$ZyprE5MRw2Q3WpNOGZWGbeG7ADUre1Q8QO.uUUtcbqloU0yvzavOm</code> which does have a structure. The first small bit of data <code>$2a</code> is defining what kind of hash algorithm was used. The next portion <code>$13</code> defines the <em>cost</em>. Cost is about how much power it takes to compute the hash. It is on a logarithmic scale of 2^cost and determines how many times the data is put through the hashing algorithm. For example, at a cost of 10 you are able to hash 10 passwords a second on an average computer, however at a cost of 15 it takes 3 seconds per hash... and to take it further, at a cost of 31 it would takes multiple days to complete a hash. A cost of 12 is considered very secure at this time. The last portion of your hash <code>$ZyprE5MRw2Q3WpNOGZWGbeG7ADUre1Q8QO.uUUtcbqloU0yvzavOm</code>, looks like one large string of numbers, periods, and letters but it is actually two separate pieces of information. The first 22 characters is the salt in plain text, and the rest is the hashed password!</p><hr id="abc43ec9-48df-400a-94c6-cf80c117935c"/><p id="461ff971-d7e8-4f46-9f41-464c6eb613b9" class="">To begin using BCrypt, add it as a dependency in your project and require it as &#x27;bcrypt&#x27; in your server.</p><p id="b0348ebd-930d-45ef-906b-228665d0848e" class="">Add all your code for these lessons in the <code>server.js</code> file between the code we have started you off with. Do not change or delete the code we have added for you.</p><p id="193d57c1-f159-4964-af8c-47cac246add6" class="">
</p><hr id="2897fd0c-1b11-491c-b114-448e105be08a"/><hr id="699cc480-0df4-4d76-b1db-adf4b329e49d"/><hr id="eb65f4bf-36f3-47bb-bd87-cf34729632e3"/><hr id="d0b7b5b8-82fc-492d-bf12-174982518faa"/><p id="7292a7b7-c799-466f-a968-87059353ed8b" class="">
</p><p id="82a9cf6e-fa2b-4be2-9dee-21245bbdfd1d" class="">
</p><h2 id="a1bc467f-a5a3-475f-b17e-1e9176104b5b" class=""><strong>Motivation Behind </strong><code><strong>bcrypt</strong></code></h2><h3 id="e53121a7-45cb-4eb6-b2fb-78c1a742d107" class="">Technology changes fast. Increasing the speed and power of computers can benefit both the engineers trying to build software systems and the attackers trying to exploit them. Some cryptographic software is not designed to scale with computing power. As explained earlier, the safety of the password depends on how fast the selected cryptographic hashing function can calculate the password hash. A fast function would execute faster when running in much more powerful hardware.</h3><h3 id="ee203bc5-3eb5-45c4-a58b-ccd3054196cd" class="">To mitigate this attack vector, we could create a cryptographic hash function that can be tuned to run slower in newly available hardware; that is, the function scales with computing power. This is particularly important since, through this attack vector, people tend to keep the length of the passwords constant. Hence, in the design of a cryptographic solution for this problem, <strong>we must account for rapidly evolving hardware and constant password length</strong>.</h3><h3 id="6762ab06-8957-413e-9f24-5ab4a850c57d" class="">This attack vector was well understood by cryptographers in the 90s and an algorithm by the name of <code>bcrypt</code> that met these design specifications was <a href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node1.html">presented in 1999 at USENIX</a>. Let&#x27;s learn how <code>bcrypt</code> allows us to create strong password storage systems.</h3><h2 id="1980d46a-851d-48be-8608-ae224d31e63d" class=""><strong>What is </strong><code><strong>bcrypt</strong></code><strong>?</strong></h2><h3 id="5fb83f9b-d115-46d0-9279-cfc7f4470360" class=""><code>bcrypt</code> was designed by <a href="https://twitter.com/NielsProvos">Niels Provos</a> and <a href="https://twitter.com/dmazieres">David Mazières</a> based on the <a href="https://en.wikipedia.org/wiki/Blowfish_(cipher">Blowfish cipher</a>&gt;): <code>b</code> for Blowfish and <code>crypt</code> for the name of the hashing function used by the UNIX password system.</h3><h3 id="6769a9d0-296c-482a-85da-3d0488d5e7e7" class=""><code>crypt</code> is a great example of failure to adapt to technology changes. <a href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node1.html">According to USENIX</a>, in 1976, <code>crypt</code> could hash fewer than 4 passwords per second. Since <a href="https://en.wikipedia.org/wiki/Preimage_attack">attackers need to find the pre-image of a hash</a> in order to invert it, this made the UNIX Team feel very comfortable about the strength of <code>crypt</code>. However, 20 years later, a fast computer with optimized software and hardware was capable of hashing 200,000 passwords per second using that function!</h3><h3 id="cab1c942-f73f-4760-8aab-7bde8b607673" class="">Inherently, an attacker could then carry out a complete <a href="https://en.wikipedia.org/wiki/Dictionary_attack">dictionary attack</a> with extreme efficiency. Thus, cryptography that was exponentially more difficult to break as hardware became faster was required in order to hinder the speed benefits that attackers could get from hardware.</h3><h3 id="5a9343f7-1c2f-418f-9d4c-e4e56f58a898" class="">The Blowfish cipher is a fast <a href="https://en.wikipedia.org/wiki/Block_cipher">block cipher</a> except when changing <a href="https://en.wikipedia.org/wiki/Key_(cryptography">keys</a>&gt;), the parameters that establish the functional output of a cryptographic algorithm: each new key requires the <a href="https://en.wikipedia.org/wiki/Blowfish_(cipher">pre-processing equivalent to encrypting about 4 kilobytes of text</a>&gt;), which is considered very slow compared to other block ciphers. This slow key changing is beneficial to password hashing methods such as <code>bcrypt</code> since the extra computational demand helps protect against dictionary and brute force attacks by <strong>slowing down the attack</strong>.</h3><h1 id="253c2159-1fac-42cd-83a0-f995b711504f" class="">As shown in <a href="https://en.wikipedia.org/wiki/Blowfish_(cipher">&quot;Blowfish in practice&quot;</a>&gt;), <code>bcrypt</code> is able to mitigate those kinds of attacks by combining the expensive key setup phase of Blowfish with a variable number of iterations to increase the workload and duration of hash calculations. The largest benefit of <code>bcrypt</code> is that, over time, the <a href="https://en.wikipedia.org/wiki/Bcrypt">iteration count can be increased to make it slower</a> allowing <code>bcrypt</code> to scale with computing power. We can dimish any benefits attackers may get from faster hardware by increasing the number of iterations to make <code>bcrypt</code> slower.</h1><h1 id="085791f3-ca74-4b21-a0b2-4716061479f0" class=""><a href="https://twitter.com/intent/tweet?text=%22%60bcrypt%60%20was%20designed%20for%20password%20hashing%20hence%20it%20is%20a%20slow%20algorithm.%20This%20is%20good%20for%20password%20hashing%20as%20it%20reduces%20the%20number%20of%20passwords%20by%20second%20an%20attacker%20could%20hash%20when%20crafting%20a%20dictionary%20attack.%20%22%20via%20@auth0%20https://auth0.com/blog/hashing-in-action-understanding-bcrypt"><strong>&quot;`bcrypt` was designed for password hashing hence it is a slow algorithm. This is good for password hashing as it reduces the number of passwords by second an attacker could hash when crafting a dictionary attack. &quot;</strong></a><a href="https://twitter.com/intent/tweet?text=%22%60bcrypt%60%20was%20designed%20for%20password%20hashing%20hence%20it%20is%20a%20slow%20algorithm.%20This%20is%20good%20for%20password%20hashing%20as%20it%20reduces%20the%20number%20of%20passwords%20by%20second%20an%20attacker%20could%20hash%20when%20crafting%20a%20dictionary%20attack.%20%22%20via%20@auth0%20https://auth0.com/blog/hashing-in-action-understanding-bcrypt"><strong>Tweet This</strong></a></h1><h3 id="73fee711-1c6d-496d-8d2e-95d5af3673ac" class="">Another benefit of <code>bcrypt</code> is that it requires a salt by default. Let&#x27;s take a deeper look at how this hashing function works!</h3><h1 id="943c9abf-60d3-4bef-82be-0c3cf8119ee4" class=""><a href="https://twitter.com/intent/tweet?text=%22%60bcrypt%60%20forces%20you%20to%20follow%20security%20best%20practices%20as%20it%20requires%20a%20salt%20as%20part%20of%20the%20hashing%20process.%20Hashing%20combined%20with%20salts%20protects%20you%20against%20rainbow%20table%20attacks!%20Are%20password%20salts%20part%20of%20your%20security%20strategy%3F%22%20via%20@auth0%20https://auth0.com/blog/hashing-in-action-understanding-bcrypt"><strong>&quot;`bcrypt` forces you to follow security best practices as it requires a salt as part of the hashing process. Hashing combined with salts protects you against rainbow table attacks! Are password salts part of your security strategy?&quot;</strong></a><a href="https://twitter.com/intent/tweet?text=%22%60bcrypt%60%20forces%20you%20to%20follow%20security%20best%20practices%20as%20it%20requires%20a%20salt%20as%20part%20of%20the%20hashing%20process.%20Hashing%20combined%20with%20salts%20protects%20you%20against%20rainbow%20table%20attacks!%20Are%20password%20salts%20part%20of%20your%20security%20strategy%3F%22%20via%20@auth0%20https://auth0.com/blog/hashing-in-action-understanding-bcrypt"><strong>Tweet This</strong></a></h1><h2 id="6337c199-500c-4ad3-b6ab-1dcea225e0d3" class=""><strong>How does </strong><code><strong>bcrypt</strong></code><strong> work?</strong></h2><h3 id="9caf68a0-de92-45a4-812b-17d86b8f0ad7" class="">Provos and Mazières, the designers of <code>bcrypt</code>, used the expensive key setup phase of the Blowfish cipher to develop a <a href="https://en.wikipedia.org/wiki/Bcrypt">new key setup algorithm for Blowfish</a> named &quot;eksblowfish&quot;, which stands for &quot;expensive key schedule Blowfish.&quot;</h3><h3 id="a33496a7-4465-4a27-a4bc-b512b3365a43" class=""><strong>What&#x27;s &quot;key setup&quot;?</strong><strong> According to </strong><a href="https://ianhowson.com/"><strong>Ian Howson</strong></a><strong>, a software engineer at NVIDIA: &quot;Most ciphers consist of a key setup phase and an operation phase. During key setup, the internal state is initialised. During operation, input ciphertext or plaintext is encrypted or decrypted. Key setup only needs to be conducted once for each key that is used&quot; </strong><a href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node5.html#fig:bcrypt"><code><strong>bcrypt</strong></code></a><a href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node5.html#fig:bcrypt"><strong> runs in two phases</strong></a><strong>:</strong></h3><h1 id="1f78f25b-84b7-4b6c-996b-bfa4a3136418" class=""><strong>Phase 1:</strong></h1><h3 id="47390f4c-0007-40b6-a776-0d2dbdd6b5e7" class="">A function called <code>EksBlowfishSetup</code> is setup using the desired cost, the salt, and the password to initialize the state of <code>eksblowfish</code>. Then, <code>bcrypt</code> spends a lot of time running an expensive key schedule which consists of performing a <a href="https://en.wikipedia.org/wiki/Key_derivation_function">key derivation</a> where we derive a set of subkeys from a primary key. Here, the password is used as the primary key. In case that the user selected a bad or short password, we stretch that password/key into a longer password/key. The aforementioned practice is also known as <a href="https://en.wikipedia.org/wiki/Key_stretching">key stretching</a>.</h3><h1 id="ae20ed5c-0853-46ff-83f3-ae083be4247f" class="">What we are going through this first phase is to promote <a href="https://crypto.stackexchange.com/questions/46550/benchmark-differences-between-sha-512-and-bcrypt">key strengthening</a> to slow down calculations which in turn also slow down attackers.</h1><h1 id="99c9bfbd-1385-41ce-97ea-e8983bbaa75f" class=""><strong>Phase 2:</strong></h1><h1 id="f5a4bb7f-00fb-4759-9e0e-5f72ee2fbe79" class="">The magic value is the 192-bit value <code>OrpheanBeholderScryDoubt</code>. This value is encrypted 64 times using <code>eksblowfish</code> in <a href="https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation#Electronic_Codebook_(ECB">ECB mode</a>&gt;) with the state from the previous phase. The output of this phase is the cost and the 128-bit salt value concatenated with the result of the encryption loop.</h1><h1 id="6f5c8e74-9b3b-474c-a1c6-d16ebde28854" class=""></h1><figure id="93aca66a-e665-4610-95f7-492f9f31bfc6" class="image"><a href="https://images.ctfassets.net/23aumh6u8s0i/4kR0K8ZKnZKhcspF2ImeaE/a3d7bee55a00a70526fc0b4ea2442666/bcrypt-algo"><img src="https://images.ctfassets.net/23aumh6u8s0i/4kR0K8ZKnZKhcspF2ImeaE/a3d7bee55a00a70526fc0b4ea2442666/bcrypt-algo"/></a></figure><h1 id="2f6a8f43-52b2-458e-beb7-a8cada05fc7a" class="">The resulting hash is prefixed with <code>$2a$</code>, <code>$2y$</code>, or <code>$2b$</code>. The prefixes are added to indicate usage of <code>bcrypt</code> and its version.</h1><h1 id="bff91087-a063-479d-a805-ec130fbc18a9" class="">The result of <code>bcrypt</code> achieves <a href="https://www.usenix.org/legacy/events/usenix99/provos/provos_html/node3.html#sec:design">core properties of a secure password function</a> as defined by its designers:</h1><h1 id="4a431a33-62bc-48dd-812e-f7f1dff4c80c" class="">It&#x27;s preimage resistant.The salt space is large enough to mitigate precomputation attacks, such as rainbow tables.It has an adaptable cost.</h1><h1 id="b3ff74b7-f3b1-424c-9e8c-c0f13bb6bc24" class="">The designers of <code>bcrypt</code> believe that the function will hold its strength and value for many years. Its mathematical design gives assurance to cryptographers about its resilience to attacks.</h1><h1 id="4b1635ee-6083-4ab9-8fbf-94d57448646d" class="">Regarding adaptable cost, we could say that <code>bcrypt</code> is an adaptive hash function as we are able to increase the number of iterations performed by the function based on a passed key factor, the cost. This adaptability is what allows us to compensate for increasing computer power, but it comes with an opportunity cost: speed or security?</h1><h2 id="ac32da49-433d-423f-9002-833df4a75772" class=""><code><strong>bcrypt</strong></code><strong> Best Practices</strong></h2><h1 id="18ceb882-22e1-43ad-aba0-3cca82e1dceb" class="">The challenge of security engineers is to decide what cost to set for the function. This cost is also known as the <strong>work factor</strong>. OWASP recommends as a <a href="https://cheatsheetseries.owasp.org/cheatsheets/Password_Storage_Cheat_Sheet.html#work-factors">common rule of thumb for work factor setting</a> to tune the cost so that the function runs as slow as possible without affecting the users&#x27; experience and without increasing the need to use additional hardware that may be over budget.</h1><h1 id="5c4d154c-581a-4d79-b339-b376bd4c6d40" class="">Let&#x27;s take a closer look at an example based on OWASP recommendations:</h1><h1 id="e448810e-eff2-4bf8-bcd9-fff09cfa87b0" class="">Perform UX research to find what are acceptable user wait times for registration and authentication.If the accepted wait time is 1 second, tune the cost of <code>bcrypt</code> for it to run in 1 second on your hardware.Analyze with your security team if the computation time is enough to mitigate and slow down attacks.</h1><h1 id="58176fb4-d805-41f9-b909-9f21d4892ff1" class="">Users may be fine waiting for 1 or 2 seconds as they don&#x27;t have to consistently authenticate. The process could still be perceived as quick. Whereas, this delay would frustrate the efforts of an attacker to quickly compute a rainbow table.</h1><h1 id="b9333758-f0e6-4c85-b5f4-2ebe12ad0795" class="">Being able to tune the cost of <code>bcrypt</code> allow us to scale with hardware optimization. Following a modern definition of <a href="https://www.investopedia.com/terms/m/mooreslaw.asp">Moore&#x27;s Law</a>, the number of transistors per square inch on integrated systems has been doubling approximately every 18 months. In 2 years, we could increase the cost factor to accommodate any change. However, we need to be careful with this: if we simply increase the work factor of bcrypt in our code, everyone will be locked out. A migration process is necessary in this case.</h1><h1 id="367e9775-9173-4c9c-b47c-ff00314e6ac7" class=""><strong>Check out a cool </strong><a href="https://en.wikipedia.org/wiki/Moore%27s_law#/media/File:Moore%27s_Law_Transistor_Count_1971-2016.png"><strong>graph that shows the numbers of transistors on integrated circuit chips</strong></a><strong> from 1971 to 2016.</strong><a href="https://twitter.com/intent/tweet?text=%22When%20using%20%60bcrypt%60%2C%20it%27s%20critical%20to%20find%20the%20right%20balance%20between%20security%20and%20usability.%20Increasing%20the%20cost%20factor%20increases%20computation%20time.%20Where%20do%20password%20operations%20happen%3F%20How%20long%20are%20your%20users%20willing%20to%20wait%3F%22%20via%20@auth0%20https://auth0.com/blog/hashing-in-action-understanding-bcrypt"><strong>&quot;When using `bcrypt`, it&#x27;s critical to find the right balance between security and usability. Increasing the cost factor increases computation time. Where do password operations happen? How long are your users willing to wait?&quot;</strong></a><a href="https://twitter.com/intent/tweet?text=%22When%20using%20%60bcrypt%60%2C%20it%27s%20critical%20to%20find%20the%20right%20balance%20between%20security%20and%20usability.%20Increasing%20the%20cost%20factor%20increases%20computation%20time.%20Where%20do%20password%20operations%20happen%3F%20How%20long%20are%20your%20users%20willing%20to%20wait%3F%22%20via%20@auth0%20https://auth0.com/blog/hashing-in-action-understanding-bcrypt"><strong>Tweet This</strong></a></h1><figure id="866f4f8f-4e39-47a5-832d-a884dd8f10a0" class="image"><a href="https://cdn.auth0.com/blog/resources/twitter.svg"><img src="https://cdn.auth0.com/blog/resources/twitter.svg"/></a></figure><h1 id="a194304c-8302-4702-8e43-01f3c523c1d2" class="">As an example on how the increasing the work factor increases the work time, I created a Node.js script that computed the hash of <code>DFGh5546*%^__90</code> using a cost from 10 to 20.</h1><h1 id="2bddc23a-4fde-49a1-b429-260ac0f5b699" class=""><code>const bcrypt = require(&quot;bcrypt&quot;);
const plainTextPassword1 = &quot;DFGh5546*%^__90&quot;;
for (let saltRounds = 10; saltRounds &lt; 21; saltRounds++) { console.time(`bcrypt | cost: ${saltRounds}, time to hash`); bcrypt.hashSync(plainTextPassword1, saltRounds); console.timeEnd(`bcrypt | cost: ${saltRounds}, time to hash`);
}</code></h1><h1 id="bf7d5798-75d5-43ad-9f74-f732b787bdd1" class=""><strong>In the next section, we are going to explore the Node.js implementation in more detail. The script was run on a 2017 MacBook Pro with the following specs (We get nice equipment at Auth0! </strong><a href="https://auth0.com/careers"><strong>Join us</strong></a><strong>!):</strong></h1><h1 id="efe86c82-78ea-414c-ba1c-10aa5d4a7db9" class="">Processor: 2.8 GHz Intel Core i7Memory: 16 GB 2133 MHz LPDDR3Graphics: Radeon Pro 555 2048 MB, Intel HD Graphics 630 1536 MB</h1><h1 id="b846e6ab-c8f4-4472-b2de-3868d3f59ef7" class="">These are the results:</h1><h1 id="a4a8c073-d583-4d61-ab23-ba8426292f8c" class=""><code>bcrypt | cost: 10, time to hash: 65.683ms
bcrypt | cost: 11, time to hash: 129.227ms
bcrypt | cost: 12, time to hash: 254.624ms
bcrypt | cost: 13, time to hash: 511.969ms
bcrypt | cost: 14, time to hash: 1015.073ms
bcrypt | cost: 15, time to hash: 2043.034ms
bcrypt | cost: 16, time to hash: 4088.721ms
bcrypt | cost: 17, time to hash: 8162.788ms
bcrypt | cost: 18, time to hash: 16315.459ms
bcrypt | cost: 19, time to hash: 32682.622ms
bcrypt | cost: 20, time to hash: 66779.182ms</code></h1><h1 id="a1e6226a-e7d6-4ae3-afb6-d73a3294ae7e" class="">Plotting this data in <a href="https://www.wolframalpha.com/input/?i=exponential+fit+65.683,+129.227,+254.624,+511.969,+1015.073,+2043.034,+4088.721,8162.788,16315.459,32682.622,+66779.182">Wolfram Alpha</a> to create a <a href="https://en.wikipedia.org/wiki/Least_squares"><strong>least-squares fit</strong></a> graph, we observe that the time to hash a password grows exponentially as the cost is increased in this particular hardware configuration:</h1><h1 id="e9d6be5d-ace9-4ace-a101-f94ed509b76a" class=""></h1><figure id="2e165750-e490-4b56-9979-22a4e5b9748c" class="image"><a href="https://images.ctfassets.net/23aumh6u8s0i/2lyPfTYS6uWSrplQ9bouc2/d14a78b18d1618eeb85adad9d2368fd5/graph"><img src="https://images.ctfassets.net/23aumh6u8s0i/2lyPfTYS6uWSrplQ9bouc2/d14a78b18d1618eeb85adad9d2368fd5/graph"/></a></figure><h1 id="eb653045-d101-46fe-b80f-b96d65c57328" class="">For this data set, Wolfram Alpha gives us the following least-squares best fit equation:</h1><h1 id="431f8941-aa12-4f3e-9b97-41aff9dc4942" class=""><code>28.3722 e^(0.705681x)</code></h1><h1 id="097f46a9-8f70-42e4-85b6-6444b2cebc0c" class="">If we wanted to predict how long would it take to hash a password in this system when the cost is <code>30</code>, we could simply plug that value for <code>x</code>:</h1><h1 id="2b8de4e4-8879-4505-92a4-e23df1a29faa" class=""><code>28.3722 e^(0.705681(30)) = 44370461014.7</code></h1><h1 id="85f2f833-3f64-4e1f-ba80-7dfcad549593" class="">A cost factor of <code>30</code> could take <code>44370461014.7</code> milliseconds to calculate. That is, <code>739507.68</code> minutes or <code>513.55</code> days! A much faster machine optimized with the latest and the greatest technology available today could have smaller computation times. However, <code>bcrypt</code> can easily scale our hashing process to accommodate to faster hardware, leaving us a lot of wiggle room to prevent attackers from benefiting from future technology improvements.</h1><h1 id="2ac6163d-e3db-4b11-a353-5e1601a73f58" class="">If a company ever detects or suspects that a data breach has compromised passwords, even in hash form, it must prompt its users to change their password right away. While hashing and salting prevent a brute-force attack of billions of attempts to be successful, a single password crack is computationally feasible. An attacker may, with tremendous amount of computational power, or by sheer luck, crack a single password, but even then, the process would be most certainly slow due to the characteristics of <code>bcrypt</code>, giving the company and their users precious time to change passwords.</h1><h1 id="440c98de-d47e-4866-b6a6-8c35f069d997" class="">Now that we understand how <code>bcrypt</code> works, let&#x27;s explore how it can be implemented in a web application at a high level.</h1><h2 id="c755e83a-1e4a-4104-90b8-b489cb7a537a" class=""><strong>Implementing </strong><code><strong>bcrypt</strong></code></h2><h1 id="f68612f4-8ba6-48e8-9ee2-0cf78b0740f6" class="">We are going to explore its implementation using <a href="https://nodejs.org/en/">Node.js</a> and its popular <a href="https://github.com/kelektiv/node.bcrypt.js">node.bcrypt.js</a> implementation. You don&#x27;t need to create a Node.js project. The purpose of this section is to show the common steps that developers have to take when integrating <code>bcrypt</code> in their backend.</h1><h1 id="54ad8bcc-0a4c-4712-94bc-6fcc95706f84" class=""><code>node.bcrypt.js</code> is installed via <a href="https://www.npmjs.com/"><code>npm</code></a>, a Node.js package manager via the following command:</h1><h1 id="3179d74d-4964-4780-91c1-dde7993d7390" class=""><code>npm install bcrypt</code></h1><h1 id="c262d539-96cc-452a-af07-f11afd5c955b" class="">Then, on an entry-point file for the server, such as <code>app.js</code>, we create a set of variables to refer throughout the implementation:</h1><h1 id="8538540e-86e5-4db2-82b5-624b4eadbdf4" class=""><code>// app.js
const bcrypt = require(&quot;bcrypt&quot;);
const saltRounds = 10;
const plainTextPassword1 = &quot;DFGh5546*%^__90&quot;;</code></h1><h1 id="10d12cc8-5020-4b8e-81fe-16b9d16ed106" class=""><code>bcrypt</code> gives us access to a Node.js library that has utility methods to facilitate the hashing process. <code>saltRounds</code> represent the cost or work factor. We are going to use a random password, <code>plainTextPassword1</code>, for the example.</h1><h1 id="b76a5a28-422a-46a1-8d85-af999659b0f1" class="">This Node.js implementation is interesting because it gives us two different techniques to hash the passwords. Let&#x27;s explore them.</h1><h3 id="482d54e2-bb3e-44a0-a1f4-53605b66e197" class=""><strong>Technique 1: Generate a salt and hash on separate function calls.</strong></h3><h1 id="3cb6e99d-3ed8-4c7b-b0fc-c05fdc7d19b8" class=""><code>// app.js
const bcrypt = require(&quot;bcrypt&quot;);
const saltRounds = 10;
const plainTextPassword1 = &quot;DFGh5546*%^__90&quot;;
bcrypt .genSalt(saltRounds) .then(salt =&gt; { console.log(`Salt: ${salt}`); return bcrypt.hash(plainTextPassword1, salt); }) .then(hash =&gt; { console.log(`Hash: ${hash}`); // Store hash in your password DB. }) .catch(err =&gt; console.error(err.message));</code></h1><h1 id="54552481-5828-4876-98a6-0f4ad312c9dd" class="">Using the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> pattern to control the asynchronous nature of JavaScript, in this technique, we first create a salt through the <code>bcrypt.genSalt</code> function that takes the cost, <code>saltRounds</code>. Upon success, we get a <code>salt</code> value that we then pass to <code>bcrypt.hash</code> along with the password, <code>plainTextPassword1</code>, that we want to hash. The success of <code>bcrypt.hash</code> provides us with the hash that we need to store in our database. In a full implementation, we would also want to store a username along with the hash in this final step.</h1><h1 id="44365813-ed6d-47e6-8d06-f26b697b4424" class="">Notice that I included some <code>console.log</code> statements to show the values of the <code>salt</code> and the <code>hash</code> as the process went along. Something that is really helpful in this implementation is that you do not have to create the <code>salt</code> yourself. The library creates a strong salt for you.</h1><h1 id="4291a654-442f-4b8d-a52c-71e10bce70a8" class="">In the first run, I got the following results in the command line:</h1><h1 id="b7609f13-a23b-4ea5-ac78-4c9ab24e3fa4" class=""><code>Salt: $2b$10$//DXiVVE59p7G5k/4Klx/e
Hash: $2b$10$//DXiVVE59p7G5k/4Klx/ezF7BI42QZKmoOD0NDvUuqxRE5bFFBLy</code></h1><h1 id="bc98b6a0-f81b-468f-9b45-71f3cbd6cc69" class="">You won&#x27;t be able to reproduce these results again since the salt is completely random every time <code>genSalt</code> is run. Running it again, I got the following output:</h1><h1 id="fed707b5-f28e-4d56-84ee-1d55d2391fb5" class=""><code>Salt: $2b$10$3euPcmQFCiblsZeEu5s7p.
Hash: $2b$10$3euPcmQFCiblsZeEu5s7p.9OVHgeHWFDk9nhMqZ0m/3pd/lhwZgES</code></h1><h1 id="d9dd36a5-60a6-42ba-8bd2-5ed7355a0bfe" class="">Hence, each password that we hash is going to have a unique salt and a unique hash. As <a href="https://auth0.com/blog/adding-salt-to-hashing-a-better-way-to-store-passwords/">we learned before</a>, this helps us mitigate greatly rainbow table attacks.</h1><h3 id="11f3148e-cc55-41f9-91a2-280c159fbfa2" class=""><strong>Technique 2: Auto-generate a salt and a hash</strong></h3><h1 id="3ab2017e-d93e-445c-9ba8-69df3865e9c4" class="">In this version, we use a single function to both create the salt and hash the password:</h1><h1 id="d012095e-c1ee-4bcc-8e5a-87f89adfcfd1" class=""><code>// app.js
const bcrypt = require(&quot;bcrypt&quot;);
const saltRounds = 10;
const plainTextPassword1 = &quot;DFGh5546*%^__90&quot;;
bcrypt .hash(plainTextPassword1, saltRounds) .then(hash =&gt; { console.log(`Hash: ${hash}`); // Store hash in your password DB. }) .catch(err =&gt; console.error(err.message));</code></h1><h1 id="bc68c373-5123-4a56-941e-4447583265fa" class="">This technique has a smaller footprint and may be easier to test. Again, a new hash is created each time the function is run, regardless of the password being the same.</h1><h1 id="922c678c-35c3-4cb3-af2d-0e4f5e640d61" class="">Notice how in both techniques we are storing the hash and not the password. <strong>The user&#x27;s password itself should not be stored anywhere in plaintext</strong>.</h1><h1 id="b7fa3f39-9053-442e-b9bb-e3ddd687dbd4" class="">Once we have our password hashes stored in the database, how do we validate a user login? Let&#x27;s check that out.</h1><h3 id="2841eda4-64cf-4135-a5c4-82fb1d407037" class=""><strong>Validating a Password with a Hash</strong></h3><h1 id="86662243-0ddd-4b23-a234-ec6d61ca8ca7" class="">Using the <code>bcrypt.hash</code> method, let&#x27;s see how we can compare a provided password with a stored hash. Since we are not connecting to a database in this example, we are going to create the hash and save it somewhere, like a text editor. The hash I got is:</h1><h1 id="b08ef8ec-0fbf-4c8e-a60c-09a18bd8316b" class=""><code>$2b$10$69SrwAoAUNC5F.gtLEvrNON6VQ5EX89vNqLEqU655Oy9PeT/HRM/a</code>.</h1><h1 id="8542726f-a9d9-4185-bd54-f10d6111abe8" class="">Next, we are going to check the passwords and see how they match. First, we check if our stored hash matches the hash of the provided password:</h1><h1 id="91e317a9-7fbf-444d-9b0a-8a5e91e6ed69" class=""><code>// app.js
const bcrypt = require(&quot;bcrypt&quot;);
const plainTextPassword1 = &quot;DFGh5546*%^__90&quot;;
const hash = &quot;$2b$10$69SrwAoAUNC5F.gtLEvrNON6VQ5EX89vNqLEqU655Oy9PeT/HRM/a&quot;;
bcrypt .compare(plainTextPassword1, hash) .then(res =&gt; { console.log(res); }) .catch(err =&gt; console.error(err.message));</code></h1><h1 id="c0423e6f-2b8d-470d-8130-3b51563bcba0" class="">In this case, <code>res</code> is <code>true</code>, indicating that the password provided, when hashed, matched the stored hash.</h1><h1 id="9bfec6ad-916c-4d0d-b18f-4386a1dc0b76" class="">Opposite, we expect to get <code>false</code> for <code>res</code> if we check the hash against <code>plainTextPassword2</code>:</h1><h1 id="8743178e-5099-4733-9a54-f58faa93a548" class=""><code>// app.js
const bcrypt = require(&quot;bcrypt&quot;);
const plainTextPassword1 = &quot;DFGh5546*%^__90&quot;;
const plainTextPassword2 = &quot;456kin&amp;*jhjUHJ1&quot;;
const hash = &quot;$2b$10$69SrwAoAUNC5F.gtLEvrNON6VQ5EX89vNqLEqU655Oy9PeT/HRM/a&quot;;
bcrypt .compare(plainTextPassword2, hash) .then(res =&gt; { console.log(res); }) .catch(err =&gt; console.error(err.message));</code></h1><h1 id="1eed77df-ff66-4035-bbfa-51badbece855" class="">And, effectively, <code>res</code> is false. We did not store the salt though, so how does <code>bcrypt.compare</code> know which salt to use? Looking at a previous hash/salt result, notice how the hash is the salt with the hash appended to it:</h1><h1 id="3881d38a-2272-4d3d-a88f-3157bf4821ad" class=""><code>Salt: $2b$10$3euPcmQFCiblsZeEu5s7p.
Hash: $2b$10$3euPcmQFCiblsZeEu5s7p.9OVHgeHWFDk9nhMqZ0m/3pd/lhwZgES</code></h1><h1 id="e9d3ae43-b55e-43d2-90aa-90d05301b4e5" class=""><code>bcrypt.compare</code> deduces the salt from the hash and is able to then hash the provided password correctly for comparison.</h1><h1 id="8b95be52-4c12-4102-9a22-e70a91de8752" class="">That&#x27;s the flow of using <code>bcrypt</code> in Node.js. This example is very trivial and there are a lot of others things to care about such as storing username, ensuring the whole backend application is secure, doing security tests to find vulnerabilities. Hashing a password, though essential, is just a small part of a sound security strategy.</h1><h1 id="095697f6-ff88-416b-82c1-b15362c67f1a" class="">Other languages would follow a similar workflow:</h1><h1 id="e78fa5d4-3405-4661-ac89-0e10e61c7236" class="">Here&#x27;s an <a href="https://docs.spring.io/spring-security/site/docs/4.2.5.RELEASE/apidocs/org/springframework/security/crypto/bcrypt/BCrypt.html">example using Spring Security</a> for Java.This <a href="https://docs.djangoproject.com/en/3.0/topics/auth/passwords/#using-bcrypt-with-django">example uses Django</a> for Python.Finally, this <a href="https://laravel.com/docs/5.0/hashing">example uses Laravel</a> for PHP.</h1><h2 id="49efac22-9cc3-4f3b-bf78-9367620c829d" class=""><strong>Simplifying Password Management with Auth0</strong></h2><h1 id="bd79d04a-e95b-4223-b777-76a62123e741" class="">The main idea of password verification is to compare two hashes and determine if they match each other. The process is very complex. A solid identity strategy demands an organization to keep current with cryptographic advances, design a process to phase out deprecated or vulnerable algorithms, provide pen testing, invest in physical and network security among many others. With all factors considered, it isn&#x27;t easy or inexpensive.</h1><h1 id="2184eb2f-38f1-413a-a868-2925612feb03" class="">You can minimize the overhead of hashing, salting and password management through <a href="https://auth0.com/">Auth0</a>. We solve the most complex identity use cases with an extensible and easy to integrate platform that secures billions of logins every month.</h1><h1 id="0555fa7f-279f-489b-88a9-b2340268b228" class="">Auth0 helps you prevent critical identity data from falling into the wrong hands. We never store passwords in cleartext. Passwords are always hashed and salted using <a href="https://en.wikipedia.org/wiki/Bcrypt">bcrypt</a>. We&#x27;ve built state-of-the-art security into our product, to protect your business and your users.</h1></div></article></body></html>